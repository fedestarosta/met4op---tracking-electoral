# Planteamiento del problema

# OBJETIVO:
# 1) Unificar las distintas encuestas en una sola base.
# 2) Calcular indicadores de evolución temporal (imagen del candidato)
# 3) Comparar la variable principal (imagen del candidato) con variables de "control" como voto y voto anterior
# 4) Ponderar o corregir según variables sociodemográficas.
# 5) Generar una salida dinámica actualizable.

#INPUT
  # VARIABLES DE ENTRADA:
  # Encuestas sucesivas con columnas:
  # Fecha, Encuesta, Estrato, Sexo, Edad, NivelEducativo, IntegrantesHogar, ImagenCandidato, Voto, VotoAnterior

      #Fecha
      #Variable: fecha
      #Tipo: datetime (formato yyyy-mm-dd)
      #utilidad: ordenar temporalmente las encuestas, construir series cronológicas y agrupar por ola o periodo.
      
      #Encuesta
      #Variable: encuesta_id
      #Tipo: int
      #utilidad: identificador único de cada encuesta; permite distinguir fuentes y momentos de medición.
      
      #Estrato
      #Variable: estrato
      #Tipo: categórica
      #utilidad: variable de control, permite ponderar.
      
      #Sexo
      #Variable: sexo
      #Tipo: categórica (“Masculino”, “Femenino”)
      #utilidad: desagregar resultados y comparar diferencias entre grupos de género. También variable de control.
      
      #Edad
      #Variable: edad
      #Tipo: numérica (int)
      #utilidad: base para construir el grupo etario; permite análisis de correlación con la imagen y el voto.
      
      #Nivel Educativo
      #Variable: nivel_educativo
      #Tipo: categórica (“Primario completo o incompleto”, “Secundario completo o incompleto”, “Terciario completo o incompleto”, “Universitario completo o incompleto”, "Ns/Nc")
      #utilidad: analizar comportamiento político según nivel de formación o capital cultural.
      
      #Cantidad de Integrantes en el Hogar
      #Variable: integrantes_hogar
      #Tipo: numérica (int)
      #utilidad: indicador demográfico.
      
      #Imagen del Candidato
      #Variable: imagen_candidato
      #Tipo: numérica (0–100)
      #utilidad: medir la valoración promedio y su evolución temporal; puede graficarse en tracking o correlacionarse con voto.
      #Variable PRINCIPAL
      
      #Voto
      #Variable: voto
      #Tipo: categórica (“Candidato_A”, “Candidato_B”, “Blanco”, "Nulo", "Ns/Nc")
      #utilidad: variable central para estimar apoyo electoral y calcular intención de voto agregada.
      
      #Voto Anterior
      #Variable: voto_anterior
      #Tipo: categórica (“Candidato_A”, “Candidato_B”, "No fue a votar", “Blanco”, "Nulo", "Ns/Nc")
      #utilidad: analizar transferencias de voto, fidelidad y cambios entre elecciones.


#PROCESAMIENTO
  # 1) CARGA Y LIMPIEZA DE DATOS
      # Importar librerías necesarias (pandas, numpy, etc.)
      # Cargar todas las encuestas disponibles desde su fuente (CSV, Excel o API)
      # Concatenar en un único dataframe (base_tracking)
      # Uniformar nombres de columnas y formatos (fecha, categorías)
      # Eliminar duplicados y casos inválidos, como por ejemplo menores de 16 años. 

  # 2) CREAR VARIABLES AUXILIARES:
    # Ola o Periodo: crear la variable categórica a partir de la variable fecha. #utilidad: crear un indicador temporal que agrupe las observaciones según el día de realización de la encuesta y nos permita comparar tendencias entre olas.
    # Crear la variable grupo_etario (variable derivada de Edad). Tipo: categórica (intervalos: 18–24, 25–34, 35–44, 45–54, 55–64, 65+). Utilidad: segmentar tendencias por generación; visualizar diferencias etarias en voto e imagen. 
    # Ordenar los datos en sentido temporal ascendente, asegurando que las encuestas más antiguas queden primero.

  # 3) PESOS Y CORRECCIONES:
    # Calcular pesos según distribución poblacional (sexo, edad). Usar datos del INDEC o censo para definir proporciones esperadas.
    # Calcular peso = proporción_poblacional / proporción_muestral  
    # Corregir posibles NAs.

 # 4) CALCULAR VARIABLES PRINCIPALES:
    # Imagen del candidato (variable continua):
       # Agrupar por Fecha → calcular media ponderada de imagen_Candidato


    # Intención de voto (variable categórica):
       # Agrupar por Fecha y Voto → calcular proporciones ponderadas
    
    
    # Transferencia de voto:
    # Cruzar VotoAnterior vs. Voto → matriz de flujos (% ponderados)
      # La transferencia de voto mide hacia dónde se mueven los votantes entre dos momentos (antes y ahora), podemos mostrarla con un diagrama de Sankey

    # Generar gráficos series de tiempo
        # Imagen media del candidato
        # Intención de voto por fuerza política

    # Propuesta EXTRA (consultar si es útil o no)
      # Analisis por segmentos
        Cruzar indicadores (Imagen o Voto) con variables:
        #   - Sexo
        #   - Edad (o grupos etarios)
        #   - NivelEducativo
        #   - Estrato (zona, distrito)
     ---tengo un docu aparte para ver las anotaciones en relación a esto

    # Crear una función que 
##### que agregue la info con un loop

#OUTPUT

# CREACIÓN DE TABLAS DATAFRAMES GRAFICOS

  #Tenemos distintos tipos de indicadores creados. Crear distintos tipos de output para cada uno.

  # Evolución temporal
    #

  # Estructura del voto

  # Cruce de voto anterior / voto actual 


  # EXPORT
  #   - Gráficos de series temporales
  #   - Tablas en CSV o Excel
  #   - Dashboard ?
  
  

